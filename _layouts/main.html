{% include header.html %}

{% assign projects = site.projects | sort:"index" %}

<script>
jQuery( function($) {
	$( '.fill' ).responsiveEqualHeightGrid();
} );

$( document ).ready( function() {
	$( '#carousel' ).carousel( {
		interval: false
	} );

  OnIndex( 0 );

	$('#carousel').on('slid.bs.carousel', function (event) {
  		  var active = $(event.target).find('.carousel-inner > .item.active');
		  var from = active.index();
		  var next = $(event.relatedTarget);
		  var to = next.index();
		  var direction = event.direction;
		  OnIndex( to );
	});
} );

function OnIndex( a_index ) {
	console.log( a_index );

  var title;
  var desc;
  var link;
  var tags;

  switch( a_index ) {
    {% for project in projects %}
      case {% increment index %}:
        title = "{{ project.title }}";
        desc = "{{ project.sections["Description"][0] }}";
        link = "{{ project.url }}";
        tags = "|"
        {% for tech in project.tech %}
        tags = tags + " {{ tech }} |";
        {% endfor %}
      break;
      
    {% endfor %}
  }

  $( '#gameName' ).text( title );
  $( '#gameName' ).attr( "href", link );
  $( '#small' ).text( " " + tags );
  $( '#desc' ).text( desc );
  $( '#more' ).attr( "href", link );
};
</script>

 <div class="container">
	 <h1 class="title">Portfolio</h1>
</div>

<div id="carousel" class="carousel slide carouselBacking">
  <!-- Indicators -->
  <ol class="carousel-indicators">
  {% assign index = 0 %}
  {% for page in projects %}
    {% if index == 0 %}
    <li data-target="#carousel" data-slide-to="{{ index }}" class="active"></li>
    {% else %}
    <li data-target="#carousel" data-slide-to="{{ index }}"></li>
    {% endif %}
    {% assign index = index | plus: 1 %}
  {% endfor %}
  </ol>

  <!-- Wrapper for slides -->
  <div class="carousel-inner" style="height: 100%;" role="listbox">
  {% assign index = 0 %}
  {% for page in projects %}
    {% if index == 0 %}
    <div class="item active" style="height: 100%;background: url( &quot;{{ page.imgDir }}bg.png&quot; ) center center no-repeat;background-size: cover;">
    {% else %}
    <div class="item" style="height: 100%;background: url( &quot;{{ page.imgDir }}bg.png&quot; ) center center no-repeat;background-size: cover;">
    {% endif %}
    {% if page.youtube %}
    		<iframe class="sliderItem" src="{{ page.youtube }}" frameborder="0" allowfullscreen></iframe>
    {% else %}
        <img class="sliderItem" src="{{ page.imgDir }}0.png"/>
    {% endif %}
    </div>
    {% assign index = index | plus: 1 %}
  {% endfor %}

  </div>

  <!-- Controls -->
  <a class="left carousel-control" href="#carousel" role="button" data-slide="prev">
    <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="right carousel-control" href="#carousel" role="button" data-slide="next">
    <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>

<div class="container">
	<h2 class="title"><a class="title" id="gameName" href="/"></a><small id="small" class="title" style="opacity:0.5;"></small></h2>
	<p id="desc" class="text"></p>
  <p class="text"><a id="more" href="/">Read more...</a></p>
</div>

{{ content }}

{% include footer.html %}